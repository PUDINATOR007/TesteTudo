<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Navinha Shooter</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { background: black; overflow: hidden; touch-action: none; }
    canvas { display: block; margin: auto; background: #111; }

    #startBtn {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      padding: 20px 40px;
      font-size: 24px;
      background: #0f0;
      color: black;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      z-index: 2;
    }
  </style>
</head>
<body>
  <button id="startBtn">Iniciar Jogo</button>
  <canvas id="gameCanvas" width="360" height="640"></canvas>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const startBtn = document.getElementById('startBtn');

    let ship, bullets = [], enemies = [], keys = {}, score = 0, gameLoop;

    function init() {
      ship = { x: canvas.width / 2 - 15, y: canvas.height - 60, w: 30, h: 30 };
      bullets = [];
      enemies = [];
      score = 0;
      spawnEnemies();
      gameLoop = setInterval(update, 1000 / 60);
    }

    function spawnEnemies() {
      setInterval(() => {
        const x = Math.random() * (canvas.width - 30);
        enemies.push({ x, y: -30, w: 30, h: 30, speed: 2 });
      }, 1000);
    }

    function update() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Movimentação da nave
      if (keys['ArrowLeft'] && ship.x > 0) ship.x -= 5;
      if (keys['ArrowRight'] && ship.x < canvas.width - ship.w) ship.x += 5;

      // Desenhar nave
      ctx.fillStyle = 'white';
      ctx.fillRect(ship.x, ship.y, ship.w, ship.h);

      // Atualizar e desenhar balas
      bullets = bullets.filter(b => b.y > -10);
      bullets.forEach(b => {
        b.y -= 8;
        ctx.fillStyle = 'red';
        ctx.fillRect(b.x, b.y, b.w, b.h);
      });

      // Atualizar e desenhar inimigos
      enemies.forEach(e => {
        e.y += e.speed;
        ctx.fillStyle = 'lime';
        ctx.fillRect(e.x, e.y, e.w, e.h);
      });

      // Colisões
      bullets.forEach((b, bi) => {
        enemies.forEach((e, ei) => {
          if (b.x < e.x + e.w && b.x + b.w > e.x &&
              b.y < e.y + e.h && b.y + b.h > e.y) {
            bullets.splice(bi, 1);
            enemies.splice(ei, 1);
            score += 10;
          }
        });
      });

      // Game Over
      enemies.forEach(e => {
        if (e.y + e.h > ship.y &&
            e.x < ship.x + ship.w &&
            e.x + e.w > ship.x) {
          clearInterval(gameLoop);
          alert('Game Over! Pontuação: ' + score);
          location.reload();
        }
      });

      // Pontuação
      ctx.fillStyle = 'white';
      ctx.font = '20px Arial';
      ctx.fillText('Score: ' + score, 10, 30);
    }

    // Controles
    window.addEventListener('keydown', e => keys[e.key] = true);
    window.addEventListener('keyup', e => keys[e.key] = false);

    window.addEventListener('touchstart', e => {
      const touchX = e.touches[0].clientX;
      if (touchX < canvas.width / 2) keys['ArrowLeft'] = true;
      else keys['ArrowRight'] = true;
      bullets.push({ x: ship.x + ship.w / 2 - 2, y: ship.y, w: 4, h: 10 });
    });

    window.addEventListener('touchend', () => {
      keys['ArrowLeft'] = false;
      keys['ArrowRight'] = false;
    });

    startBtn.addEventListener('click', () => {
      startBtn.style.display = 'none';
      init();
    });
  </script>
</body>
</html>