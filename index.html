<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Jogo de Navinha</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      background: black;
      overflow: hidden;
      font-family: sans-serif;
    }

    canvas {
      display: block;
      margin: auto;
      background: #111;
      touch-action: none;
    }

    #game-over {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-size: 2rem;
      display: none;
      text-align: center;
    }

    #game-over button {
      margin-top: 1rem;
      padding: 0.5rem 1rem;
      font-size: 1rem;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas"></canvas>
  <div id="game-over">
    <div>ðŸ’¥ Fim de Jogo!</div>
    <button onclick="location.reload()">Jogar Novamente</button>
  </div>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    let width = window.innerWidth;
    let height = window.innerHeight;
    canvas.width = width;
    canvas.height = height;

    // Nave
    const player = {
      x: width / 2 - 25,
      y: height - 80,
      w: 50,
      h: 50,
      speed: 10,
    };

    const bullets = [];
    const enemies = [];
    let gameOver = false;

    function drawPlayer() {
      ctx.fillStyle = "lime";
      ctx.fillRect(player.x, player.y, player.w, player.h);
    }

    function drawBullet(bullet) {
      ctx.fillStyle = "yellow";
      ctx.fillRect(bullet.x, bullet.y, bullet.w, bullet.h);
    }

    function drawEnemy(enemy) {
      ctx.fillStyle = "red";
      ctx.fillRect(enemy.x, enemy.y, enemy.w, enemy.h);
    }

    function shoot() {
      bullets.push({
        x: player.x + player.w / 2 - 5,
        y: player.y,
        w: 10,
        h: 20,
        speed: 10,
      });
    }

    function spawnEnemy() {
      enemies.push({
        x: Math.random() * (width - 40),
        y: -40,
        w: 40,
        h: 40,
        speed: 2 + Math.random() * 3,
      });
    }

    function checkCollision(a, b) {
      return (
        a.x < b.x + b.w &&
        a.x + a.w > b.x &&
        a.y < b.y + b.h &&
        a.y + a.h > b.y
      );
    }

    function update() {
      if (gameOver) return;

      ctx.clearRect(0, 0, width, height);
      drawPlayer();

      // Tiros
      bullets.forEach((bullet, index) => {
        bullet.y -= bullet.speed;
        if (bullet.y < 0) bullets.splice(index, 1);
        else drawBullet(bullet);
      });

      // Inimigos
      enemies.forEach((enemy, eIndex) => {
        enemy.y += enemy.speed;
        if (enemy.y > height) enemies.splice(eIndex, 1);
        else {
          drawEnemy(enemy);

          // ColisÃ£o com jogador
          if (checkCollision(enemy, player)) {
            document.getElementById("game-over").style.display = "block";
            gameOver = true;
          }

          // ColisÃ£o com tiro
          bullets.forEach((bullet, bIndex) => {
            if (checkCollision(enemy, bullet)) {
              bullets.splice(bIndex, 1);
              enemies.splice(eIndex, 1);
            }
          });
        }
      });

      requestAnimationFrame(update);
    }

    // Tiro automÃ¡tico
    setInterval(() => {
      if (!gameOver) shoot();
    }, 400);

    // Spawn de inimigos
    setInterval(() => {
      if (!gameOver) spawnEnemy();
    }, 1000);

    // Movimento por toque
    canvas.addEventListener("touchstart", (e) => {
      const touchX = e.touches[0].clientX;
      if (touchX < width / 2) {
        player.x -= player.speed;
      } else {
        player.x += player.speed;
      }

      // Limites
      if (player.x < 0) player.x = 0;
      if (player.x + player.w > width) player.x = width - player.w;
    });

    update();
  </script>
</body>
</html>